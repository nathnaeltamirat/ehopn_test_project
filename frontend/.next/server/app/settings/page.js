(()=>{var e={};e.id=938,e.ids=[938],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},5229:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>l});var r=t(482),a=t(9108),n=t(2563),o=t.n(n),i=t(8300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let l=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8826)),"C:\\Users\\ms\\Documents\\personal_file\\GIT\\ehopn_test_project\\frontend\\app\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9770)),"C:\\Users\\ms\\Documents\\personal_file\\GIT\\ehopn_test_project\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\ms\\Documents\\personal_file\\GIT\\ehopn_test_project\\frontend\\app\\settings\\page.tsx"],m="/settings/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},1344:(e,s,t)=>{Promise.resolve().then(t.bind(t,8917))},8917:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(5344),a=t(3729),n=t(9758),o=t(8879),i=t(8117);function c(){let{t:e,i18n:s}=(0,n.$G)(),[t,c]=(0,a.useState)("profile"),[l,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,p]=(0,a.useState)([]),[g,h]=(0,a.useState)(!1),[f,y]=(0,a.useState)({profile:!1,subscription:!1,language:!1,password:!1,deleteAccount:!1}),[b,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[v,P]=(0,a.useState)(!1),[C,S]=(0,a.useState)({firstName:"John",lastName:"Doe",email:"john.doe@example.com"}),[k,D]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[E,q]=(0,a.useState)({password:""}),[T,_]=(0,a.useState)({}),[L,U]=(0,a.useState)({});(0,a.useEffect)(()=>{F(),O()},[]),(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search),s=e.get("success"),t=e.get("canceled"),r=e.get("tx_ref");s&&r?$(r):t&&w({type:"error",text:"Subscription was canceled"})},[]);let F=async()=>{try{h(!0);let[e,s]=await Promise.all([i.x1.getCurrentUser(),i.x1.getCurrentSubscription()]);e.success&&e.data&&(d(e.data),S({firstName:e.data.name.split(" ")[0]||"",lastName:e.data.name.split(" ").slice(1).join(" ")||"",email:e.data.email})),s.success&&s.data&&u(s.data)}catch(s){console.error("Failed to fetch user data:",s),w({type:"error",text:s.message||e("settings.loadError")})}finally{h(!1)}},O=async()=>{try{let e=await i.x1.getSubscriptionPlans();e.success&&e.data&&p(e.data)}catch(e){console.error("Failed to fetch subscription plans:",e)}},$=async e=>{try{h(!0),w(null);let s=await i.x1.verifyChapaPayment(e);s.success&&s.data?(w({type:"success",text:"Subscription activated successfully!"}),u(s.data),F(),window.history.replaceState({},document.title,window.location.pathname)):w({type:"error",text:s.message||"Failed to activate subscription"})}catch(e){console.error("Failed to handle Chapa success:",e),w({type:"error",text:e.message||"Failed to activate subscription"})}finally{h(!1)}},A=async e=>{try{y(e=>({...e,subscription:!0})),w(null);let s=await i.x1.createChapaPayment(e);s.success&&s.data?"checkoutUrl"in s.data?window.open(s.data.checkoutUrl):(w({type:"success",text:"Subscription activated successfully!"}),u(s.data),F()):w({type:"error",text:s.message||"Failed to create subscription"})}catch(e){console.error("Failed to create subscription:",e),w({type:"error",text:e.message||"Failed to create subscription"})}finally{y(e=>({...e,subscription:!1}))}},M=async t=>{try{y(e=>({...e,language:!0})),w(null),await s.changeLanguage(t),document.documentElement.dir="ar"===t?"rtl":"ltr";let r=await i.x1.updateUserLanguage(t);r.success?(w({type:"success",text:e("settings.languageUpdated")}),l&&d({...l,language:t}),window.location.reload()):w({type:"error",text:r.message||e("settings.languageUpdateError")})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,language:!1}))}},R=async()=>{try{if(y(e=>({...e,subscription:!0})),w(null),!m?.chapaTxRef){w({type:"error",text:"No transaction reference found. Please try subscribing again."});return}let e=await i.x1.verifyChapaPayment(m.chapaTxRef);e.success?(w({type:"success",text:"Payment verified successfully! Subscription activated."}),F()):w({type:"error",text:e.message||"Payment verification failed"})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,subscription:!1}))}},I=async()=>{try{y(e=>({...e,subscription:!0})),w(null);let s=await i.x1.cancelSubscription();s.success?(w({type:"success",text:e("settings.cancelSuccess")}),N(!1),F()):w({type:"error",text:s.message||e("settings.cancelError")})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,subscription:!1}))}},J=e=>{let{name:s,value:t}=e.target;S(e=>({...e,[s]:t}))},z=async s=>{s.preventDefault();try{y(e=>({...e,profile:!0})),w(null);let s=`${C.firstName} ${C.lastName}`.trim(),t=await i.x1.updateUserProfile({name:s,email:C.email});if(t.success&&t.data){w({type:"success",text:e("settings.profileUpdated")}),d(t.data);let s=t.data.name.split(" ");S(e=>({...e,firstName:s[0]||"",lastName:s.slice(1).join(" ")||"",email:t.data.email}))}else w({type:"error",text:t.message||e("settings.profileUpdateError")})}catch(s){console.error("Profile update error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,profile:!1}))}},B=e=>{let{name:s,value:t}=e.target;D(e=>({...e,[s]:t})),T[s]&&_(e=>({...e,[s]:void 0}))},G=()=>{let e={};return k.currentPassword||(e.currentPassword="Current password is required"),k.newPassword?k.newPassword.length<6?e.newPassword="Password must be at least 6 characters long":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(k.newPassword)||(e.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):e.newPassword="New password is required",k.confirmPassword?k.newPassword!==k.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your new password",_(e),0===Object.keys(e).length},H=async s=>{if(s.preventDefault(),G())try{y(e=>({...e,password:!0})),w(null);let s=await i.x1.changePassword({currentPassword:k.currentPassword,newPassword:k.newPassword,confirmPassword:k.confirmPassword});s.success?(w({type:"success",text:e("settings.passwordChanged")}),D({currentPassword:"",newPassword:"",confirmPassword:""}),_({})):w({type:"error",text:s.message||e("settings.passwordChangeError")})}catch(s){console.error("Password change error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,password:!1}))}},W=e=>{let{name:s,value:t}=e.target;q(e=>({...e,[s]:t})),U(e=>({...e,[s]:void 0}))},V=()=>{let e={};return E.password||(e.password="Password is required to delete account"),U(e),0===Object.keys(e).length},X=async s=>{if(s.preventDefault(),V())try{y(e=>({...e,deleteAccount:!0})),w(null);let s=await i.x1.deleteAccount(E.password);s.success?(w({type:"success",text:e("settings.deleteAccountSuccess")}),setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/login"},2e3)):w({type:"error",text:s.message||e("settings.deleteAccountError")})}catch(s){console.error("Delete account error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,deleteAccount:!1}))}},Y=(e,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e),Z=e=>new Date(e).toLocaleDateString(),K=[{id:"profile",name:e("settings.profile"),icon:"\uD83D\uDC64"},{id:"subscription",name:e("settings.subscription"),icon:"\uD83D\uDCB3"},{id:"language",name:e("settings.language"),icon:"\uD83C\uDF10"},{id:"account",name:e("settings.account"),icon:"\uD83D\uDD10"},{id:"notifications",name:e("settings.notifications"),icon:"\uD83D\uDD14"},{id:"security",name:e("settings.security"),icon:"\uD83D\uDEE1️"},{id:"billing",name:e("settings.billing"),icon:"\uD83D\uDCB0"},{id:"preferences",name:e("settings.preferences"),icon:"⚙️"}],Q=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.profile")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Update your personal information"})]}),(0,r.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:e("auth.firstName")}),r.jsx("input",{type:"text",name:"firstName",id:"firstName",value:C.firstName,onChange:J,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:e("auth.lastName")}),r.jsx("input",{type:"text",name:"lastName",id:"lastName",value:C.lastName,onChange:J,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:e("auth.email")}),r.jsx("input",{type:"email",name:"email",id:"email",value:C.email,onChange:J,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:f.profile,className:"bg-primary-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:f.profile?e("common.loading"):e("settings.updateProfile")})})]})]}),ee=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.subscription")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose the perfect plan for your needs"})]}),m&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-blue-900",children:["Current Plan: ",m.plan]}),r.jsx("p",{className:"text-sm text-blue-700",children:"Free"===m.plan?"Free plan":`${Y(m.amount||0,m.currency||"usd")} / month`})]}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"active"===m.status?"bg-green-100 text-green-800":"canceled"===m.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e(`settings.status.${m.status}`)})]}),"Free"!==m.plan&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:["Next billing: ",Z(m.renewDate)]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:x.map(s=>{let t=m?.plan===s.name,a="Pro"===s.name;return(0,r.jsxs)("div",{className:`relative bg-white rounded-lg shadow-lg border-2 ${t?"border-primary-500 ring-2 ring-primary-500 ring-opacity-50":a?"border-blue-500":"border-gray-200"} overflow-hidden`,children:[a&&r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-blue-500 text-white text-center py-1 text-xs font-medium",children:"Most Popular"}),t&&r.jsx("div",{className:"absolute top-0 right-0 bg-primary-500 text-white px-2 py-1 text-xs font-medium rounded-bl-lg",children:"Current Plan"}),(0,r.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.name}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:0===s.price?"Free":Y(s.price/100,s.currency)}),s.price>0&&r.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("ul",{className:"space-y-2 sm:space-y-3",children:s.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 sm:mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:e})]},s))})}),r.jsx("div",{className:"mt-8",children:t?r.jsx("button",{disabled:!0,className:"w-full bg-gray-100 text-gray-500 px-4 py-2 rounded-md text-sm font-medium cursor-not-allowed",children:"Current Plan"}):r.jsx("button",{onClick:()=>A(s.name),disabled:f.subscription,className:`w-full px-4 py-2 rounded-md text-sm font-medium transition-colors ${a?"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500"} focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50`,children:f.subscription?e("common.loading"):0===s.price?"Get Started":"Subscribe Now"})})]})]},s.id)})}),m&&"pending"===m.status&&r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your subscription is pending payment confirmation. Click below to verify payment with Chapa."}),r.jsx("button",{onClick:R,disabled:f.subscription,className:"bg-blue-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f.subscription?e("common.loading"):"Verify Payment"})]})}),m&&"Free"!==m.plan&&"active"===m.status&&r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>N(!0),disabled:f.subscription,className:"bg-red-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.subscription?e("common.loading"):e("settings.cancelSubscription")})})})]}),es=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.language")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose your preferred language"})]}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsx("div",{className:"space-y-4",children:[{code:"en",name:e("common.english"),flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"de",name:e("common.german"),flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"ar",name:e("common.arabic"),flag:"\uD83C\uDDF8\uD83C\uDDE6"}].map(e=>(0,r.jsxs)("div",{className:`flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${l?.language===e.code?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>M(e.code),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:e.flag}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:"ar"===e.code?"Right-to-left":"Left-to-right"})]})]}),l?.language===e.code&&r.jsx("svg",{className:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code))})})]}),et=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.account")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:e("settings.changePassword")}),(0,r.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.currentPassword")}),r.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:k.currentPassword,onChange:B,className:`mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ${T.currentPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`}),T.currentPassword&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.currentPassword})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.newPassword")}),r.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:k.newPassword,onChange:B,className:`mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ${T.newPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`}),T.newPassword&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.newPassword})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.confirmNewPassword")}),r.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:k.confirmPassword,onChange:B,className:`mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ${T.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`}),T.confirmPassword&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.confirmPassword})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:f.password,className:"bg-primary-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:f.password?e("common.loading"):e("settings.changePassword")})})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4 text-red-600",children:e("settings.deleteAccount")}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:e("settings.deleteAccountWarning")}),(0,r.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"deletePassword",className:"block text-sm font-medium text-gray-700",children:e("settings.currentPassword")}),r.jsx("input",{type:"password",id:"deletePassword",name:"password",value:E.password,onChange:W,className:`mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ${L.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`}),L.password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.password})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:f.deleteAccount,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.deleteAccount?e("common.loading"):e("settings.confirmDeleteAccount")})})]})]})]})]});return g&&!l?r.jsx(o.A,{children:r.jsx("div",{className:"flex items-center justify-center min-h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-gray-600",children:e("common.loading")})]})})}):r.jsx(o.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("settings.title")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]}),b&&r.jsx("div",{className:`rounded-md p-4 ${"success"===b.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:"success"===b.type?r.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:`text-sm ${"success"===b.type?"text-green-800":"text-red-800"}`,children:b.text})})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex overflow-x-auto scrollbar-hide px-4 sm:px-6","aria-label":"Tabs",children:r.jsx("div",{className:"flex space-x-4 sm:space-x-8 min-w-full",children:K.map(e=>(0,r.jsxs)("button",{onClick:()=>c(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${t===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-1 sm:mr-2",children:e.icon}),r.jsx("span",{className:"hidden sm:inline",children:e.name}),r.jsx("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id))})})}),r.jsx("div",{className:"p-6",children:(()=>{switch(t){case"profile":return Q();case"subscription":return ee();case"language":return es();case"account":return et();default:return(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:K.find(e=>e.id===t)?.icon}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:K.find(e=>e.id===t)?.name}),r.jsx("p",{className:"text-sm text-gray-500",children:"This feature is coming soon."})]})}})()})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:e("settings.cancelSubscriptionTitle")}),r.jsx("div",{className:"mt-2 px-7 py-3",children:r.jsx("p",{className:"text-sm text-gray-500",children:e("settings.cancelSubscriptionMessage")})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:e("common.cancel")}),r.jsx("button",{onClick:I,disabled:f.subscription,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.subscription?e("common.loading"):e("settings.confirmCancel")})]})]})})})]})})}},8879:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(5344),a=t(3729),n=t(9758),o=t(2254),i=t(783),c=t.n(i),l=t(8117);function d({children:e}){let{t:s,i18n:t}=(0,n.$G)(),i=(0,o.useRouter)(),[d,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)("en");(0,a.useEffect)(()=>{(async()=>{try{let e=await l.x1.getCurrentUser();if(e.success&&e.data){let s=e.data.language;x(s),t.language!==s&&(t.changeLanguage(s),document.documentElement.dir="ar"===s?"rtl":"ltr")}}catch(e){console.log("Could not load user language, using default")}})()},[t]);let p=()=>{i.push("/settings?tab=subscription")},g=async e=>{try{console.log("Changing language to:",e),t.changeLanguage(e),document.documentElement.dir="ar"===e?"rtl":"ltr",x(e),await l.x1.updateUserLanguage(e),console.log("Language changed successfully")}catch(e){console.error("Failed to update language:",e),t.changeLanguage(u),document.documentElement.dir="ar"===u?"rtl":"ltr"}},h=()=>{i.push("/login")},f=[{name:s("common.dashboard"),href:"/dashboard"},{name:s("common.invoices"),href:"/invoices"},{name:s("common.settings"),href:"/settings"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-sm border-b",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c(),{href:"/dashboard",className:"flex-shrink-0",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"EHopN"})}),r.jsx("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:f.map(e=>r.jsx(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.name},e.name))})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsx("div",{className:"relative",children:(0,r.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"en",children:s("common.english")}),r.jsx("option",{value:"de",children:s("common.german")}),r.jsx("option",{value:"ar",children:s("common.arabic")})]})}),r.jsx("button",{onClick:p,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:s("common.upgrade")}),r.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:s("common.logout")})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>m(!d),className:"text-gray-500 hover:text-gray-900 p-2 rounded-md","aria-label":"Toggle menu",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),d&&r.jsx("div",{className:"md:hidden",children:(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t bg-white",children:[f.map(e=>r.jsx(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>m(!1),children:e.name},e.name)),(0,r.jsxs)("div",{className:"px-3 py-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("common.language")}),(0,r.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"w-full bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"en",children:s("common.english")}),r.jsx("option",{value:"de",children:s("common.german")}),r.jsx("option",{value:"ar",children:s("common.arabic")})]})]}),r.jsx("div",{className:"px-3 py-2",children:r.jsx("button",{onClick:()=>{p(),m(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:s("common.upgrade")})}),r.jsx("div",{className:"px-3 py-2",children:r.jsx("button",{onClick:()=>{h(),m(!1)},className:"w-full text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors text-left",children:s("common.logout")})})]})})]})}),r.jsx("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:e})]})}},8117:(e,s,t)=>{"use strict";t.d(s,{uB:()=>o,x1:()=>n});let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";class a{constructor(e){this.baseURL=e}async request(e,s={}){let t=`${this.baseURL}${e}`,r={headers:{"Content-Type":"application/json",...s.headers},...s};try{let e=await fetch(t,r);if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.message||`HTTP error! status: ${e.status}`)}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify(e)})}async resetPassword(e){return this.request("/auth/reset-password",{method:"POST",body:JSON.stringify(e)})}async getInvoices(){return this.request("/invoices")}async uploadInvoice(e){let s=new FormData;s.append("file",e);let t=await fetch(`${this.baseURL}/invoices/upload`,{method:"POST",headers:{},body:s});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||`HTTP error! status: ${t.status}`);return t.json()}async createInvoice(e){return this.request("/invoices",{method:"POST",body:JSON.stringify(e)})}async updateInvoice(e,s){return this.request(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(s)})}async deleteInvoice(e){return this.request(`/invoices/${e}`,{method:"DELETE"})}async getSubscriptionPlans(){return this.request("/subscription/plans")}async createChapaPayment(e){return this.request("/subscription/chapa-payment",{method:"POST",body:JSON.stringify({planId:e})})}async verifyChapaPayment(e){return this.request("/subscription/verify-payment",{method:"POST",body:JSON.stringify({txRef:e})})}async getCurrentSubscription(){return this.request("/subscription/me")}async createSubscription(e){return this.request("/subscription/create",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(){return this.request("/subscription/cancel",{method:"POST"})}async updateUserLanguage(e){return this.request("/user/language",{method:"PUT",body:JSON.stringify({language:e})})}async updateUserProfile(e){return this.request("/user/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/user/password",{method:"PUT",body:JSON.stringify(e)})}async deleteAccount(e){return this.request("/user/account",{method:"DELETE",body:JSON.stringify({password:e})})}}let n=new a(r),o=e=>{}},8826:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let r=(0,t(6843).createProxy)(String.raw`C:\Users\ms\Documents\personal_file\GIT\ehopn_test_project\frontend\app\settings\page.tsx`),{__esModule:a,$$typeof:n}=r,o=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[904,795,66],()=>t(5229));module.exports=r})();