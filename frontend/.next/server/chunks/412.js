"use strict";exports.id=412,exports.ids=[412],exports.modules={7350:(e,t,r)=>{r.d(t,{_:()=>o});var s=r(5344),a=r(3729),n=r(9758);function o({invoice:e,isOpen:t,onClose:r,onSave:o,isLoading:i=!1}){let{t:d}=(0,n.$G)(),[l,c]=(0,a.useState)({vendor:"",date:"",amount:"",taxId:""});(0,a.useEffect)(()=>{e&&c({vendor:e.vendor,date:e.date,amount:e.amount,taxId:e.taxId})},[e]);let u=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},m=async e=>{e.preventDefault(),await o(l)},h=()=>{i||r()};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d("dashboard.editInvoice")}),s.jsx("button",{onClick:h,disabled:i,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:m,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"vendor",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.vendor")}),s.jsx("input",{type:"text",id:"vendor",name:"vendor",value:l.vendor,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:i})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.date")}),s.jsx("input",{type:"date",id:"date",name:"date",value:l.date,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:i})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.amount")}),s.jsx("input",{type:"number",id:"amount",name:"amount",value:l.amount,onChange:u,step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:i})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"taxId",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.taxId")}),s.jsx("input",{type:"text",id:"taxId",name:"taxId",value:l.taxId,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:i})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:h,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:d("common.cancel")}),s.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 flex items-center",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d("common.loading")]}):d("common.save")})]})]})]})}):null}},8879:(e,t,r)=>{r.d(t,{A:()=>c});var s=r(5344),a=r(3729),n=r(9758),o=r(2254),i=r(783),d=r.n(i),l=r(8117);function c({children:e}){let{t,i18n:r}=(0,n.$G)(),i=(0,o.useRouter)(),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)("en");(0,a.useEffect)(()=>{(async()=>{try{let e=await l.x1.getCurrentUser();if(e.success&&e.data){let t=e.data.language;h(t),r.language!==t&&(r.changeLanguage(t),document.documentElement.dir="ar"===t?"rtl":"ltr")}}catch(e){console.log("Could not load user language, using default")}})()},[r]);let x=()=>{i.push("/settings?tab=subscription")},g=async e=>{try{console.log("Changing language to:",e),r.changeLanguage(e),document.documentElement.dir="ar"===e?"rtl":"ltr",h(e),await l.x1.updateUserLanguage(e),console.log("Language changed successfully")}catch(e){console.error("Failed to update language:",e),r.changeLanguage(m),document.documentElement.dir="ar"===m?"rtl":"ltr"}},p=()=>{i.push("/login")},y=[{name:t("common.dashboard"),href:"/dashboard"},{name:t("common.invoices"),href:"/invoices"},{name:t("common.settings"),href:"/settings"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("nav",{className:"bg-white shadow-sm border-b",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(d(),{href:"/dashboard",className:"flex-shrink-0",children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"EHopN"})}),s.jsx("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:y.map(e=>s.jsx(d(),{href:e.href,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.name},e.name))})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[s.jsx("div",{className:"relative",children:(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"en",children:t("common.english")}),s.jsx("option",{value:"de",children:t("common.german")}),s.jsx("option",{value:"ar",children:t("common.arabic")})]})}),s.jsx("button",{onClick:x,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:t("common.upgrade")}),s.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:t("common.logout")})]}),s.jsx("div",{className:"md:hidden",children:s.jsx("button",{onClick:()=>u(!c),className:"text-gray-500 hover:text-gray-900 p-2 rounded-md","aria-label":"Toggle menu",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),c&&s.jsx("div",{className:"md:hidden",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t bg-white",children:[y.map(e=>s.jsx(d(),{href:e.href,className:"text-gray-500 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>u(!1),children:e.name},e.name)),(0,s.jsxs)("div",{className:"px-3 py-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("common.language")}),(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"w-full bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"en",children:t("common.english")}),s.jsx("option",{value:"de",children:t("common.german")}),s.jsx("option",{value:"ar",children:t("common.arabic")})]})]}),s.jsx("div",{className:"px-3 py-2",children:s.jsx("button",{onClick:()=>{x(),u(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:t("common.upgrade")})}),s.jsx("div",{className:"px-3 py-2",children:s.jsx("button",{onClick:()=>{p(),u(!1)},className:"w-full text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors text-left",children:t("common.logout")})})]})})]})}),s.jsx("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:e})]})}},8117:(e,t,r)=>{r.d(t,{uB:()=>o,x1:()=>n});let s=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";class a{constructor(e){this.baseURL=e}async request(e,t={}){let r=`${this.baseURL}${e}`,s={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(r,s);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||`HTTP error! status: ${e.status}`)}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify(e)})}async resetPassword(e){return this.request("/auth/reset-password",{method:"POST",body:JSON.stringify(e)})}async getInvoices(){return this.request("/invoices")}async uploadInvoice(e){let t=new FormData;t.append("file",e);let r=await fetch(`${this.baseURL}/invoices/upload`,{method:"POST",headers:{},body:t});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||`HTTP error! status: ${r.status}`);return r.json()}async createInvoice(e){return this.request("/invoices",{method:"POST",body:JSON.stringify(e)})}async updateInvoice(e,t){return this.request(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteInvoice(e){return this.request(`/invoices/${e}`,{method:"DELETE"})}async getSubscriptionPlans(){return this.request("/subscription/plans")}async createChapaPayment(e){return this.request("/subscription/chapa-payment",{method:"POST",body:JSON.stringify({planId:e})})}async verifyChapaPayment(e){return this.request("/subscription/verify-payment",{method:"POST",body:JSON.stringify({txRef:e})})}async getCurrentSubscription(){return this.request("/subscription/me")}async createSubscription(e){return this.request("/subscription/create",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(){return this.request("/subscription/cancel",{method:"POST"})}async updateUserLanguage(e){return this.request("/user/language",{method:"PUT",body:JSON.stringify({language:e})})}async updateUserProfile(e){return this.request("/user/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/user/password",{method:"PUT",body:JSON.stringify(e)})}async deleteAccount(e){return this.request("/user/account",{method:"DELETE",body:JSON.stringify({password:e})})}}let n=new a(s),o=e=>{}}};