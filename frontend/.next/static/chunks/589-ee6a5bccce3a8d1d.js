"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{2923:function(e,t,r){r.d(t,{_:function(){return o}});var s=r(7437),n=r(2265),a=r(251);function o(e){let{invoice:t,isOpen:r,onClose:o,onSave:i,isLoading:c=!1}=e,{t:d}=(0,a.$G)(),[l,u]=(0,n.useState)({vendor:"",date:"",amount:"",taxId:""});(0,n.useEffect)(()=>{t&&u({vendor:t.vendor,date:t.date,amount:t.amount,taxId:t.taxId})},[t]);let m=e=>{let{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},h=async e=>{e.preventDefault(),await i(l)},x=()=>{c||o()};return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:d("dashboard.editInvoice")}),(0,s.jsx)("button",{onClick:x,disabled:c,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:h,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"vendor",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.vendor")}),(0,s.jsx)("input",{type:"text",id:"vendor",name:"vendor",value:l.vendor,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.date")}),(0,s.jsx)("input",{type:"date",id:"date",name:"date",value:l.date,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.amount")}),(0,s.jsx)("input",{type:"number",id:"amount",name:"amount",value:l.amount,onChange:m,step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"taxId",className:"block text-sm font-medium text-gray-700 mb-1",children:d("dashboard.taxId")}),(0,s.jsx)("input",{type:"text",id:"taxId",name:"taxId",value:l.taxId,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:c})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:x,disabled:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:d("common.cancel")}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 flex items-center",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d("common.loading")]}):d("common.save")})]})]})]})}):null}},7370:function(e,t,r){r.d(t,{A:function(){return l}});var s=r(7437),n=r(2265),a=r(251),o=r(4033),i=r(1396),c=r.n(i),d=r(826);function l(e){let{children:t}=e,{t:r,i18n:i}=(0,a.$G)(),l=(0,o.useRouter)(),[u,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)("en");(0,n.useEffect)(()=>{(async()=>{try{let e=await d.x1.getCurrentUser();if(e.success&&e.data){let t=e.data.language;x(t),i.language!==t&&(i.changeLanguage(t),document.documentElement.dir="ar"===t?"rtl":"ltr")}}catch(e){console.log("Could not load user language, using default")}})()},[i]);let g=()=>{l.push("/settings?tab=subscription")},p=async e=>{try{console.log("Changing language to:",e),i.changeLanguage(e),document.documentElement.dir="ar"===e?"rtl":"ltr",x(e),await d.x1.updateUserLanguage(e),console.log("Language changed successfully")}catch(e){console.error("Failed to update language:",e),i.changeLanguage(h),document.documentElement.dir="ar"===h?"rtl":"ltr"}},y=()=>{l.push("/login")},b=[{name:r("common.dashboard"),href:"/dashboard"},{name:r("common.invoices"),href:"/invoices"},{name:r("common.settings"),href:"/settings"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c(),{href:"/dashboard",className:"flex-shrink-0",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"EHopN"})}),(0,s.jsx)("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:b.map(e=>(0,s.jsx)(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.name},e.name))})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"en",children:r("common.english")}),(0,s.jsx)("option",{value:"de",children:r("common.german")}),(0,s.jsx)("option",{value:"ar",children:r("common.arabic")})]})}),(0,s.jsx)("button",{onClick:g,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:r("common.upgrade")}),(0,s.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:r("common.logout")})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("button",{onClick:()=>m(!u),className:"text-gray-500 hover:text-gray-900 p-2 rounded-md","aria-label":"Toggle menu",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),u&&(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t bg-white",children:[b.map(e=>(0,s.jsx)(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>m(!1),children:e.name},e.name)),(0,s.jsxs)("div",{className:"px-3 py-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("common.language")}),(0,s.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"en",children:r("common.english")}),(0,s.jsx)("option",{value:"de",children:r("common.german")}),(0,s.jsx)("option",{value:"ar",children:r("common.arabic")})]})]}),(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsx)("button",{onClick:()=>{g(),m(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:r("common.upgrade")})}),(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsx)("button",{onClick:()=>{y(),m(!1)},className:"w-full text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors text-left",children:r("common.logout")})})]})})]})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:t})]})}},826:function(e,t,r){r.d(t,{uB:function(){return o},x1:function(){return a}});let s=r(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),s=localStorage.getItem("token"),n={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...t};try{let e=await fetch(r,n);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify(e)})}async resetPassword(e){return this.request("/auth/reset-password",{method:"POST",body:JSON.stringify(e)})}async getInvoices(){return this.request("/invoices")}async uploadInvoice(e){let t=new FormData;t.append("file",e);let r=localStorage.getItem("token"),s=await fetch("".concat(this.baseURL,"/invoices/upload"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:t});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"HTTP error! status: ".concat(s.status));return s.json()}async createInvoice(e){return this.request("/invoices",{method:"POST",body:JSON.stringify(e)})}async updateInvoice(e,t){return this.request("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteInvoice(e){return this.request("/invoices/".concat(e),{method:"DELETE"})}async getSubscriptionPlans(){return this.request("/subscription/plans")}async createChapaPayment(e){return this.request("/subscription/chapa-payment",{method:"POST",body:JSON.stringify({planId:e})})}async verifyChapaPayment(e){return this.request("/subscription/verify-payment",{method:"POST",body:JSON.stringify({txRef:e})})}async getCurrentSubscription(){return this.request("/subscription/me")}async createSubscription(e){return this.request("/subscription/create",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(){return this.request("/subscription/cancel",{method:"POST"})}async updateUserLanguage(e){return this.request("/user/language",{method:"PUT",body:JSON.stringify({language:e})})}async updateUserProfile(e){return this.request("/user/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/user/password",{method:"PUT",body:JSON.stringify(e)})}async deleteAccount(e){return this.request("/user/account",{method:"DELETE",body:JSON.stringify({password:e})})}constructor(e){this.baseURL=e}}let a=new n(s),o=e=>{localStorage.setItem("token",e)}}}]);