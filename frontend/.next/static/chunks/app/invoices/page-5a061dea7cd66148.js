(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{4270:function(e,s,t){Promise.resolve().then(t.bind(t,8860))},8860:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var r=t(7437),a=t(2265),i=t(251),l=t(5020),n=t(7370),c=t(2923),d=t(826);function o(){let{t:e}=(0,i.$G)(),[s,t]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[g,v]=(0,a.useState)(!1),[y,f]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[k,C]=(0,a.useState)(!1),[I,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{L()},[]);let L=async()=>{try{x(!0);let e=await d.x1.getInvoices();e.success&&e.data&&t(e.data)}catch(s){N({type:"error",text:s.message||e("invoices.loadError")})}finally{x(!1)}},E=(0,a.useCallback)(async s=>{if(0!==s.length){u(!0),N(null),p(null),v(!1);try{N({type:"success",text:e("invoices.processingFile")});let t=await d.x1.uploadInvoice(s[0]);t.success&&t.data?(p(t.data),f(t.data),v(!0),N({type:"success",text:e("invoices.uploadSuccess")})):N({type:"error",text:t.message||e("invoices.uploadError")})}catch(s){console.error("Upload error:",s),N({type:"error",text:s.message||e("invoices.networkError")})}finally{u(!1)}}},[e]),{getRootProps:M,getInputProps:z,isDragActive:A,isDragReject:B}=(0,l.uI)({onDrop:E,accept:{"application/pdf":[".pdf"],"image/*":[".png",".jpg",".jpeg"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1}),D=(e,s)=>{y&&f({...y,[e]:s})},F=async()=>{if(y){u(!0),N(null);try{let s=await d.x1.createInvoice({vendor:y.vendor,date:y.date,amount:y.amount.toString(),taxId:y.taxId,fileUrl:y.fileUrl});s.success?(N({type:"success",text:e("invoices.saveSuccess")}),v(!1),p(null),f(null),L()):N({type:"error",text:s.message||e("invoices.saveError")})}catch(s){N({type:"error",text:s.message||e("invoices.networkError")})}finally{u(!1)}}},_=e=>{w(e),C(!0)},H=()=>{C(!1),w(null)},U=async s=>{if(b)try{S(!0),N(null);let r=await d.x1.updateInvoice(b.id,{vendor:s.vendor||"",date:s.date||"",amount:s.amount||"",taxId:s.taxId||""});r.success&&r.data?(N({type:"success",text:e("dashboard.editSuccess")}),t(e=>e.map(e=>e.id===b.id?r.data:e)),H()):N({type:"error",text:r.message||e("dashboard.editError")})}catch(s){N({type:"error",text:s.message||e("dashboard.networkError")})}finally{S(!1)}},W=async s=>{if(confirm(e("dashboard.deleteConfirm")))try{let r=await d.x1.deleteInvoice(s);r.success?(N({type:"success",text:e("dashboard.deleteSuccess")}),t(e=>e.filter(e=>e.id!==s))):N({type:"error",text:r.message||e("dashboard.deleteError")})}catch(s){N({type:"error",text:s.message||e("dashboard.networkError")})}},V=e=>{let s=parseFloat(e);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)},O=e=>new Date(e).toLocaleDateString();return o?(0,r.jsx)(n.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:e("common.loading")})]})})}):(0,r.jsxs)(n.A,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e("invoices.title")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your invoices and payments"})]})}),j&&(0,r.jsx)("div",{className:"rounded-md p-4 ".concat("success"===j.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:"success"===j.type?(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm ".concat("success"===j.type?"text-green-800":"text-red-800"),children:j.text})})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:e("invoices.uploadInvoice")}),(0,r.jsxs)("div",{...M(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(A?"border-primary-500 bg-primary-50":B?"border-red-500 bg-red-50":"border-gray-300 hover:border-primary-400 hover:bg-gray-50"),children:[(0,r.jsx)("input",{...z()}),m?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("svg",{className:"animate-spin h-12 w-12 text-primary-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900",children:e("invoices.processing")}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e("invoices.extractingData")}),(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,r.jsx)("p",{children:"• Processing file..."}),(0,r.jsx)("p",{children:"• Extracting text..."}),(0,r.jsx)("p",{children:"• Analyzing with AI..."}),(0,r.jsx)("p",{children:"• Preparing results..."})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900",children:A?e("invoices.dropHere"):e("invoices.dragDropOrClick")}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e("invoices.supportedFormats")})]})]})]})]}),g&&y&&(0,r.jsxs)("div",{className:"bg-white shadow text-black rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e("invoices.editExtractedData")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("invoices.vendor")}),(0,r.jsx)("input",{type:"text",value:y.vendor,onChange:e=>D("vendor",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("invoices.date")}),(0,r.jsx)("input",{type:"date",value:y.date,onChange:e=>D("date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("invoices.amount")}),(0,r.jsx)("input",{type:"number",step:"0.01",value:y.amount,onChange:e=>D("amount",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("invoices.taxId")}),(0,r.jsx)("input",{type:"text",value:y.taxId,onChange:e=>D("taxId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{v(!1),p(null),f(null),N(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:e("common.cancel")}),(0,r.jsx)("button",{onClick:F,disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e("common.loading"):e("invoices.saveInvoice")})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e("Total Invoices")}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:s.length})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e("Total Invoice Amount")}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:V(s.reduce((e,s)=>e+parseFloat(s.amount),0).toString())})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-primary-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e("This month Invoice")}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:s.filter(e=>{let s=new Date(e.date),t=new Date;return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}).length})]})})]})})})]}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e("invoices.vendor")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e("invoices.date")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e("invoices.amount")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e("invoices.taxId")}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:e("No Invoice - Please Upload Invoice")})}):s.map(s=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.vendor}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O(s.date)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V(s.amount)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.taxId}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,r.jsx)("button",{onClick:()=>_(s),className:"text-primary-600 hover:text-primary-900",children:e("dashboard.edit")}),(0,r.jsx)("button",{onClick:()=>W(s.id),className:"text-red-600 hover:text-red-900",children:e("dashboard.delete")})]})]},s.id))})]})})})})]}),(0,r.jsx)(c._,{invoice:b,isOpen:k,onClose:H,onSave:U,isLoading:I})]})}}},function(e){e.O(0,[304,349,20,589,971,458,744],function(){return e(e.s=4270)}),_N_E=e.O()}]);