(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{3405:function(e,s,t){Promise.resolve().then(t.bind(t,6832))},6832:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var r=t(7437),a=t(2265),n=t(251),o=t(7370),i=t(826);function c(){let{t:e,i18n:s}=(0,n.$G)(),[t,c]=(0,a.useState)("profile"),[l,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,g]=(0,a.useState)([]),[p,h]=(0,a.useState)(!1),[f,y]=(0,a.useState)({profile:!1,subscription:!1,language:!1,password:!1,deleteAccount:!1}),[b,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[v,P]=(0,a.useState)(!1),[C,S]=(0,a.useState)({firstName:"John",lastName:"Doe",email:"john.doe@example.com"}),[k,D]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[E,L]=(0,a.useState)({password:""}),[T,O]=(0,a.useState)({}),[F,U]=(0,a.useState)({});(0,a.useEffect)(()=>{q(),A()},[]),(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search),s=e.get("success"),t=e.get("canceled"),r=e.get("tx_ref");s&&r?R(r):t&&w({type:"error",text:"Subscription was canceled"})},[]);let q=async()=>{try{h(!0);let[e,s]=await Promise.all([i.x1.getCurrentUser(),i.x1.getCurrentSubscription()]);e.success&&e.data&&(d(e.data),S({firstName:e.data.name.split(" ")[0]||"",lastName:e.data.name.split(" ").slice(1).join(" ")||"",email:e.data.email})),s.success&&s.data&&u(s.data)}catch(s){console.error("Failed to fetch user data:",s),w({type:"error",text:s.message||e("settings.loadError")})}finally{h(!1)}},A=async()=>{try{let e=await i.x1.getSubscriptionPlans();e.success&&e.data&&g(e.data)}catch(e){console.error("Failed to fetch subscription plans:",e)}},R=async e=>{try{h(!0),w(null);let s=await i.x1.verifyChapaPayment(e);s.success&&s.data?(w({type:"success",text:"Subscription activated successfully!"}),u(s.data),q(),window.history.replaceState({},document.title,window.location.pathname)):w({type:"error",text:s.message||"Failed to activate subscription"})}catch(e){console.error("Failed to handle Chapa success:",e),w({type:"error",text:e.message||"Failed to activate subscription"})}finally{h(!1)}},J=async e=>{try{y(e=>({...e,subscription:!0})),w(null);let s=await i.x1.createChapaPayment(e);s.success&&s.data?"checkoutUrl"in s.data?window.open(s.data.checkoutUrl):(w({type:"success",text:"Subscription activated successfully!"}),u(s.data),q()):w({type:"error",text:s.message||"Failed to create subscription"})}catch(e){console.error("Failed to create subscription:",e),w({type:"error",text:e.message||"Failed to create subscription"})}finally{y(e=>({...e,subscription:!1}))}},M=async t=>{try{y(e=>({...e,language:!0})),w(null),await s.changeLanguage(t),document.documentElement.dir="ar"===t?"rtl":"ltr";let r=await i.x1.updateUserLanguage(t);r.success?(w({type:"success",text:e("settings.languageUpdated")}),l&&d({...l,language:t}),window.location.reload()):w({type:"error",text:r.message||e("settings.languageUpdateError")})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,language:!1}))}},z=async()=>{try{if(y(e=>({...e,subscription:!0})),w(null),!(null==m?void 0:m.chapaTxRef)){w({type:"error",text:"No transaction reference found. Please try subscribing again."});return}let e=await i.x1.verifyChapaPayment(m.chapaTxRef);e.success?(w({type:"success",text:"Payment verified successfully! Subscription activated."}),q()):w({type:"error",text:e.message||"Payment verification failed"})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,subscription:!1}))}},B=async()=>{try{y(e=>({...e,subscription:!0})),w(null);let s=await i.x1.cancelSubscription();s.success?(w({type:"success",text:e("settings.cancelSuccess")}),N(!1),q()):w({type:"error",text:s.message||e("settings.cancelError")})}catch(s){w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,subscription:!1}))}},I=e=>{let{name:s,value:t}=e.target;S(e=>({...e,[s]:t}))},_=async s=>{s.preventDefault();try{y(e=>({...e,profile:!0})),w(null);let s="".concat(C.firstName," ").concat(C.lastName).trim(),t=await i.x1.updateUserProfile({name:s,email:C.email});if(t.success&&t.data){w({type:"success",text:e("settings.profileUpdated")}),d(t.data);let s=t.data.name.split(" ");S(e=>({...e,firstName:s[0]||"",lastName:s.slice(1).join(" ")||"",email:t.data.email}))}else w({type:"error",text:t.message||e("settings.profileUpdateError")})}catch(s){console.error("Profile update error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,profile:!1}))}},H=e=>{let{name:s,value:t}=e.target;D(e=>({...e,[s]:t})),T[s]&&O(e=>({...e,[s]:void 0}))},W=()=>{let e={};return k.currentPassword||(e.currentPassword="Current password is required"),k.newPassword?k.newPassword.length<6?e.newPassword="Password must be at least 6 characters long":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(k.newPassword)||(e.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):e.newPassword="New password is required",k.confirmPassword?k.newPassword!==k.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your new password",O(e),0===Object.keys(e).length},G=async s=>{if(s.preventDefault(),W())try{y(e=>({...e,password:!0})),w(null);let s=await i.x1.changePassword({currentPassword:k.currentPassword,newPassword:k.newPassword,confirmPassword:k.confirmPassword});s.success?(w({type:"success",text:e("settings.passwordChanged")}),D({currentPassword:"",newPassword:"",confirmPassword:""}),O({})):w({type:"error",text:s.message||e("settings.passwordChangeError")})}catch(s){console.error("Password change error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,password:!1}))}},V=e=>{let{name:s,value:t}=e.target;L(e=>({...e,[s]:t})),U(e=>({...e,[s]:void 0}))},$=()=>{let e={};return E.password||(e.password="Password is required to delete account"),U(e),0===Object.keys(e).length},X=async s=>{if(s.preventDefault(),$())try{y(e=>({...e,deleteAccount:!0})),w(null);let s=await i.x1.deleteAccount(E.password);s.success?(w({type:"success",text:e("settings.deleteAccountSuccess")}),setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/login"},2e3)):w({type:"error",text:s.message||e("settings.deleteAccountError")})}catch(s){console.error("Delete account error:",s),w({type:"error",text:s.message||e("settings.networkError")})}finally{y(e=>({...e,deleteAccount:!1}))}},Y=(e,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e),Z=e=>new Date(e).toLocaleDateString(),K=[{id:"profile",name:e("settings.profile"),icon:"\uD83D\uDC64"},{id:"subscription",name:e("settings.subscription"),icon:"\uD83D\uDCB3"},{id:"language",name:e("settings.language"),icon:"\uD83C\uDF10"},{id:"account",name:e("settings.account"),icon:"\uD83D\uDD10"},{id:"notifications",name:e("settings.notifications"),icon:"\uD83D\uDD14"},{id:"security",name:e("settings.security"),icon:"\uD83D\uDEE1️"},{id:"billing",name:e("settings.billing"),icon:"\uD83D\uDCB0"},{id:"preferences",name:e("settings.preferences"),icon:"⚙️"}],Q=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.profile")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Update your personal information"})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:e("auth.firstName")}),(0,r.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:C.firstName,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:e("auth.lastName")}),(0,r.jsx)("input",{type:"text",name:"lastName",id:"lastName",value:C.lastName,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:e("auth.email")}),(0,r.jsx)("input",{type:"email",name:"email",id:"email",value:C.email,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:f.profile,className:"bg-primary-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:f.profile?e("common.loading"):e("settings.updateProfile")})})]})]}),ee=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.subscription")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Choose the perfect plan for your needs"})]}),m&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-blue-900",children:["Current Plan: ",m.plan]}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Free"===m.plan?"Free plan":"".concat(Y(m.amount||0,m.currency||"usd")," / month")})]}),(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===m.status?"bg-green-100 text-green-800":"canceled"===m.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e("settings.status.".concat(m.status))})]}),"Free"!==m.plan&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:["Next billing: ",Z(m.renewDate)]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:x.map(s=>{let t=(null==m?void 0:m.plan)===s.name,a="Pro"===s.name;return(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg border-2 ".concat(t?"border-primary-500 ring-2 ring-primary-500 ring-opacity-50":a?"border-blue-500":"border-gray-200"," overflow-hidden"),children:[a&&(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-blue-500 text-white text-center py-1 text-xs font-medium",children:"Most Popular"}),t&&(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-primary-500 text-white px-2 py-1 text-xs font-medium rounded-bl-lg",children:"Current Plan"}),(0,r.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("span",{className:"text-4xl font-bold text-gray-900",children:0===s.price?"Free":Y(s.price/100,s.currency)}),s.price>0&&(0,r.jsx)("span",{className:"text-gray-500",children:"/month"})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("ul",{className:"space-y-2 sm:space-y-3",children:s.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 sm:mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:e})]},s))})}),(0,r.jsx)("div",{className:"mt-8",children:t?(0,r.jsx)("button",{disabled:!0,className:"w-full bg-gray-100 text-gray-500 px-4 py-2 rounded-md text-sm font-medium cursor-not-allowed",children:"Current Plan"}):(0,r.jsx)("button",{onClick:()=>J(s.name),disabled:f.subscription,className:"w-full px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(a?"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500"," focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50"),children:f.subscription?e("common.loading"):0===s.price?"Get Started":"Subscribe Now"})})]})]},s.id)})}),m&&"pending"===m.status&&(0,r.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Your subscription is pending payment confirmation. Click below to verify payment with Chapa."}),(0,r.jsx)("button",{onClick:z,disabled:f.subscription,className:"bg-blue-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f.subscription?e("common.loading"):"Verify Payment"})]})}),m&&"Free"!==m.plan&&"active"===m.status&&(0,r.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>N(!0),disabled:f.subscription,className:"bg-red-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.subscription?e("common.loading"):e("settings.cancelSubscription")})})})]}),es=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.language")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Choose your preferred language"})]}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:[{code:"en",name:e("common.english"),flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"de",name:e("common.german"),flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"ar",name:e("common.arabic"),flag:"\uD83C\uDDF8\uD83C\uDDE6"}].map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==l?void 0:l.language)===e.code?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),onClick:()=>M(e.code),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.flag}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"ar"===e.code?"Right-to-left":"Left-to-right"})]})]}),(null==l?void 0:l.language)===e.code&&(0,r.jsx)("svg",{className:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code))})})]}),et=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e("settings.account")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:e("settings.changePassword")}),(0,r.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.currentPassword")}),(0,r.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",value:k.currentPassword,onChange:H,className:"mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ".concat(T.currentPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500")}),T.currentPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.currentPassword})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.newPassword")}),(0,r.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:k.newPassword,onChange:H,className:"mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ".concat(T.newPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500")}),T.newPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.newPassword})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:e("settings.confirmNewPassword")}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:k.confirmPassword,onChange:H,className:"mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ".concat(T.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500")}),T.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.confirmPassword})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:f.password,className:"bg-primary-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:f.password?e("common.loading"):e("settings.changePassword")})})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4 text-red-600",children:e("settings.deleteAccount")}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e("settings.deleteAccountWarning")}),(0,r.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"deletePassword",className:"block text-sm font-medium text-gray-700",children:e("settings.currentPassword")}),(0,r.jsx)("input",{type:"password",id:"deletePassword",name:"password",value:E.password,onChange:V,className:"mt-1 block w-full border rounded-md px-3 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm ".concat(F.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500")}),F.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.password})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:f.deleteAccount,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.deleteAccount?e("common.loading"):e("settings.confirmDeleteAccount")})})]})]})]})]});return p&&!l?(0,r.jsx)(o.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:e("common.loading")})]})})}):(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e("settings.title")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]}),b&&(0,r.jsx)("div",{className:"rounded-md p-4 ".concat("success"===b.type?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:"success"===b.type?(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm ".concat("success"===b.type?"text-green-800":"text-red-800"),children:b.text})})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex overflow-x-auto scrollbar-hide px-4 sm:px-6","aria-label":"Tabs",children:(0,r.jsx)("div",{className:"flex space-x-4 sm:space-x-8 min-w-full",children:K.map(e=>(0,r.jsxs)("button",{onClick:()=>c(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ".concat(t===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-1 sm:mr-2",children:e.icon}),(0,r.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,r.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id))})})}),(0,r.jsx)("div",{className:"p-6",children:(()=>{switch(t){case"profile":return Q();case"subscription":return ee();case"language":return es();case"account":return et();default:var e,s;return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:null===(e=K.find(e=>e.id===t))||void 0===e?void 0:e.icon}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:null===(s=K.find(e=>e.id===t))||void 0===s?void 0:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"This feature is coming soon."})]})}})()})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3 text-center",children:[(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:e("settings.cancelSubscriptionTitle")}),(0,r.jsx)("div",{className:"mt-2 px-7 py-3",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e("settings.cancelSubscriptionMessage")})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3 mt-4",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:e("common.cancel")}),(0,r.jsx)("button",{onClick:B,disabled:f.subscription,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:f.subscription?e("common.loading"):e("settings.confirmCancel")})]})]})})})]})})}},7370:function(e,s,t){"use strict";t.d(s,{A:function(){return d}});var r=t(7437),a=t(2265),n=t(251),o=t(4033),i=t(1396),c=t.n(i),l=t(826);function d(e){let{children:s}=e,{t,i18n:i}=(0,n.$G)(),d=(0,o.useRouter)(),[m,u]=(0,a.useState)(!1),[x,g]=(0,a.useState)("en");(0,a.useEffect)(()=>{(async()=>{try{let e=await l.x1.getCurrentUser();if(e.success&&e.data){let s=e.data.language;g(s),i.language!==s&&(i.changeLanguage(s),document.documentElement.dir="ar"===s?"rtl":"ltr")}}catch(e){console.log("Could not load user language, using default")}})()},[i]);let p=()=>{d.push("/settings?tab=subscription")},h=async e=>{try{console.log("Changing language to:",e),i.changeLanguage(e),document.documentElement.dir="ar"===e?"rtl":"ltr",g(e),await l.x1.updateUserLanguage(e),console.log("Language changed successfully")}catch(e){console.error("Failed to update language:",e),i.changeLanguage(x),document.documentElement.dir="ar"===x?"rtl":"ltr"}},f=()=>{d.push("/login")},y=[{name:t("common.dashboard"),href:"/dashboard"},{name:t("common.invoices"),href:"/invoices"},{name:t("common.settings"),href:"/settings"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c(),{href:"/dashboard",className:"flex-shrink-0",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"EHopN"})}),(0,r.jsx)("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:y.map(e=>(0,r.jsx)(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.name},e.name))})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"en",children:t("common.english")}),(0,r.jsx)("option",{value:"de",children:t("common.german")}),(0,r.jsx)("option",{value:"ar",children:t("common.arabic")})]})}),(0,r.jsx)("button",{onClick:p,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:t("common.upgrade")}),(0,r.jsx)("button",{onClick:f,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:t("common.logout")})]}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{onClick:()=>u(!m),className:"text-gray-500 hover:text-gray-900 p-2 rounded-md","aria-label":"Toggle menu",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),m&&(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t bg-white",children:[y.map(e=>(0,r.jsx)(c(),{href:e.href,className:"text-gray-500 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>u(!1),children:e.name},e.name)),(0,r.jsxs)("div",{className:"px-3 py-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("common.language")}),(0,r.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full bg-white border text-black border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"en",children:t("common.english")}),(0,r.jsx)("option",{value:"de",children:t("common.german")}),(0,r.jsx)("option",{value:"ar",children:t("common.arabic")})]})]}),(0,r.jsx)("div",{className:"px-3 py-2",children:(0,r.jsx)("button",{onClick:()=>{p(),u(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:from-purple-700 hover:to-blue-700 transition-all",children:t("common.upgrade")})}),(0,r.jsx)("div",{className:"px-3 py-2",children:(0,r.jsx)("button",{onClick:()=>{f(),u(!1)},className:"w-full text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors text-left",children:t("common.logout")})})]})})]})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:s})]})}},826:function(e,s,t){"use strict";t.d(s,{uB:function(){return o},x1:function(){return n}});let r=t(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";class a{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(this.baseURL).concat(e),r=localStorage.getItem("token"),a={headers:{"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...s.headers},...s};try{let e=await fetch(t,a);if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.message||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify(e)})}async resetPassword(e){return this.request("/auth/reset-password",{method:"POST",body:JSON.stringify(e)})}async getInvoices(){return this.request("/invoices")}async uploadInvoice(e){let s=new FormData;s.append("file",e);let t=localStorage.getItem("token"),r=await fetch("".concat(this.baseURL,"/invoices/upload"),{method:"POST",headers:{...t&&{Authorization:"Bearer ".concat(t)}},body:s});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"HTTP error! status: ".concat(r.status));return r.json()}async createInvoice(e){return this.request("/invoices",{method:"POST",body:JSON.stringify(e)})}async updateInvoice(e,s){return this.request("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteInvoice(e){return this.request("/invoices/".concat(e),{method:"DELETE"})}async getSubscriptionPlans(){return this.request("/subscription/plans")}async createChapaPayment(e){return this.request("/subscription/chapa-payment",{method:"POST",body:JSON.stringify({planId:e})})}async verifyChapaPayment(e){return this.request("/subscription/verify-payment",{method:"POST",body:JSON.stringify({txRef:e})})}async getCurrentSubscription(){return this.request("/subscription/me")}async createSubscription(e){return this.request("/subscription/create",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(){return this.request("/subscription/cancel",{method:"POST"})}async updateUserLanguage(e){return this.request("/user/language",{method:"PUT",body:JSON.stringify({language:e})})}async updateUserProfile(e){return this.request("/user/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/user/password",{method:"PUT",body:JSON.stringify(e)})}async deleteAccount(e){return this.request("/user/account",{method:"DELETE",body:JSON.stringify({password:e})})}constructor(e){this.baseURL=e}}let n=new a(r),o=e=>{localStorage.setItem("token",e)}}},function(e){e.O(0,[304,349,971,458,744],function(){return e(e.s=3405)}),_N_E=e.O()}]);